# -*- mode: shell-script -*-
##############################################################################
# Changes the prompt to a Jeremy-style 
# Also uses the prompt_callback
# function of bash-git-prompt to set the window title to almost the same 
# Jeremy-style.
#
# The prompt will use a Jeremy-style on the form
#
# [user@host:$PWD] [bash-git-prompt-info] <exit status>
# HH:MM $
#
# The window title will have the form
# [user@host:$PWD]
#
# Example usage:
# if [ -f ~/.bash-git-prompt/gitprompt.sh ]; then
#   GIT_PROMPT_THEME=Jeremy
#   source ~/.bash-git-prompt/gitprompt.sh
# fi
#
# Jeremy 
##############################################################################
override_git_prompt_colors() {
  GIT_PROMPT_THEME_NAME="Jeremy"

  #Overrides the prompt_callback function used by bash-git-prompt
  function prompt_callback {
    local PS1="${Green}[${ResetColor}${BrightRed}\u${ResetColor}${BrightYellow}@${ResetColor}${BrightBlue}local${ResetColor}${BrightRed}:${ResetColor}${BrightYellow}\w${ResetColor}${Green}]${ResetColor}"        
    gp_set_window_title "$PS1"
  }

#  local gp_end=" _LAST_COMMAND_INDICATOR_\n${White}${Time12a}${ResetColor}"
#  local gp_end=" _LAST_COMMAND_INDICATOR_\n"
  unset Time12a;
  local gp_end="_LAST_COMMAND_INDICATOR_"

  GIT_PROMPT_START_USER=""
  # GIT_PROMPT_END_USER="${gp_end}${Green}\$${ResetColor} "
  # GIT_PROMPT_END_ROOT="${gp_end}${Green}\#${ResetColor} "
  GIT_PROMPT_END_USER="${gp_end}\n ${Green}\$${ResetColor} "
  GIT_PROMPT_END_ROOT="${gp_end}\n ${Green}\#${ResetColor} "  
}

reload_git_prompt_colors "TruncatedPwd_WindowTitle"
